# QuickRail - 1일차 개발 요약

**개발 날짜:** 2024-12-30  
**프로젝트:** Flask 기반 TestRail-lite 테스트 관리 시스템

---

## 🎯 전체 목표
- 사용자 중심의 테스트 케이스 관리 시스템 구축
- 키보드 중심 UX, 최소 클릭, 빠른 입력 지원

---

## ✅ 완료된 주요 기능

### 📦 Phase 1 (MVP) 구현
1. **프로젝트 관리**
   - 프로젝트 생성/조회
   - HTTP 415 오류 수정 (JSON payload)

2. **섹션 관리 (계층 구조)**
   - 최대 4단계 계층 구조 지원
   - 드래그 앤 드롭으로 섹션 이동
   - 재귀 매크로로 트리 렌더링
   - 깊이별 아이콘 구분 (📂📄📋📌)

3. **케이스 관리**
   - Quick Add (단일/일괄 추가)
   - 인라인 편집 (타이틀, 우선순위, 스텝, 기대결과)
   - 드래그 앤 드롭 정렬 (기본 정렬 모드)
   - 케이스 복사 (바로 아래 위치에 생성)
   - 케이스 상세보기 모달 (편집 가능)
   - 편집/복사/삭제 버튼
   - 정렬: 기본, 최근순, 오래된 순, 제목순, 우선순위
   - 우선순위: P0-P3 → **Critical, High, Medium, Low**

4. **런(Run) 관리**
   - 런 생성/실행/완료
   - 케이스 선택 모달 (섹션별 체크박스)
   - 런 템플릿 저장/로드
   - 런 삭제 기능
   - 실시간 협업 (5초 자동 새로고침)

5. **런 실행 페이지**
   - 2-pane 레이아웃 (케이스 목록 + 상세)
   - 리사이저로 너비 조절 (300-800px, 기본 450px)
   - localStorage에 사용자별 설정 저장
   - 키보드 단축키 (1-5: 결과 입력, n/p: 이동, j/k, g/G, c, r, Esc)
   - contenteditable로 케이스 정보 편집
   - 편집 중 단축키 비활성화
   - 결과 기록 시 다음 케이스로 자동 이동
   - 5분 이내 같은 실행자 수정 시 결과 업데이트 (중복 방지)

### 📦 Phase 2 (편의 기능) 구현
1. **사용자 관리**
   - 관리자 계정 (`admin@pubg.com`)
   - 역할: Admin, Author, Runner
   - 회원 관리 (활성화/비활성화, 삭제)
   - 계정 정보 변경 (이름, 비밀번호)
   - 회원 탈퇴

2. **대시보드**
   - 프로젝트별 런 통계
   - Top Failing Cases
   - Old Cases
   - Flaky Cases

3. **UI/UX 개선**
   - 실시간 동기화 인디케이터
   - 저장 완료 알림
   - 케이스 제목 동적 말줄임표
   - 생성자/수정자 이름 표시
   - 드래그 가능 여부 표시

---

## 🗄️ 데이터베이스 스키마

### 추가된 컬럼
- `users.is_active` - 계정 활성화 여부
- `cases.order_index` - 섹션 내 순서
- `cases.created_by` - 생성자 ID
- `cases.updated_by` - 수정자 ID
- `cases.priority` - Critical/High/Medium/Low

### 주요 테이블
- User (사용자)
- Project (프로젝트)
- Section (섹션, 4단계 계층)
- Case (테스트 케이스)
- Tag (태그)
- Run (테스트 런)
- RunCase (런-케이스 매핑)
- Result (실행 결과)
- RunTemplate (런 템플릿)
- AuditLog (감사 로그)

---

## 🐛 수정된 주요 버그

1. **프로젝트 생성 HTTP 415 오류**
   - HTMX form-encoded → JSON payload

2. **런 실행 페이지 JSON 직렬화 오류**
   - SQLAlchemy 객체 → 딕셔너리 변환

3. **케이스 선택 모달 미작동**
   - 모달 HTML 누락 → 추가
   - 전역 변수 미선언 → 선언

4. **결과 기록 시 첫 케이스로 이동**
   - location.reload() 제거 → 로컬 데이터 업데이트

5. **실행 횟수 누적 버그**
   - 5분 이내 같은 실행자 → 기존 결과 업데이트

6. **회원관리 페이지 오류**
   - User 모델 import 누락

7. **드래그 불가 버그**
   - 기본 정렬 체크 로직 수정

8. **상세보기 모달 오류**
   - 모달 HTML 누락, null 체크 추가

---

## 🛠️ 기술 스택

- **Backend:** Flask, SQLAlchemy, Flask-Login
- **Frontend:** Jinja2, Vanilla JavaScript, SortableJS
- **Database:** SQLite (dev) / PostgreSQL (prod 예정)
- **Authentication:** SCrypt 해싱
- **Real-time:** Polling (5초 간격)

---

## 📊 코드 통계

- **Python 파일:** 약 10개
- **HTML 템플릿:** 약 10개
- **API 엔드포인트:** 40+ 개
- **JavaScript 함수:** 80+ 개
- **데이터베이스 테이블:** 12개

---

## 🚀 다음 단계 (Phase 3 예상)

- [ ] Full-text search (FTS5)
- [ ] 첨부파일 업로드
- [ ] 감사 로그 UI
- [ ] 차트 및 리포트
- [ ] API 인증 (토큰)
- [ ] WebSocket 실시간 업데이트
- [ ] 이메일 알림
- [ ] 데이터 내보내기 (CSV, Excel)

---

## 💡 특별히 구현된 기능

1. **키보드 중심 UX**
   - 런 실행 시 키보드만으로 모든 작업 가능
   - 편집 모드에서는 단축키 비활성화

2. **실시간 협업**
   - 5초마다 자동 새로고침
   - 변경사항만 업데이트 (부드러운 UX)

3. **스마트 결과 관리**
   - 5분 이내 수정은 업데이트 (실행 횟수 유지)
   - 그 외는 새 결과 생성

4. **사용자별 설정 저장**
   - localStorage로 사이드바 너비 저장
   - 브라우저/기기별 독립적

5. **재귀적 섹션 구조**
   - Jinja2 매크로로 무한 깊이 지원 (최대 4단계 제한)

---

## 📝 개발 노트

- 총 개발 시간: 약 8-10시간
- 주요 패러다임: 사용자 중심 설계
- 코드 품질: Linter 오류 0개
- Git 커밋: (커밋 예정)

**개발자 코멘트:**  
"TestRail의 핵심 기능을 간소화하여 빠른 입력과 최소 클릭에 집중한 시스템입니다. 특히 런 실행 페이지의 키보드 단축키와 인라인 편집은 테스터의 생산성을 크게 높일 것으로 기대됩니다."

---

**END OF DAY 1** 🎉

